{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap af46b14994d12de6de70","webpack:///./src/index.js"],"names":["valueOf","_value","set","value","_isFrozen","_isQuiet","notify","update","suppliedInputs","newValue","inputs","inputLength","length","Math","max","_inputs","Array","map","_","index","_reducer","input","_isNotifying","Error","_listeners","forEach","listener","trigger","reducer","reducerFn","arguments","TypeError","listenTo","liveValues","liveValue","hasOwnProperty","isArray","push","listenToInput","freeze","unfreeze","quiet","unquiet","prototype","listenToInputs","itsAlive","initialValue","Object","assign","create","x"],"mappings":"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","file":"itsAlive.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"itsAlive\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"itsAlive\"] = factory();\n\telse\n\t\troot[\"itsAlive\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap af46b14994d12de6de70","\r\nfunction valueOf() {\r\n  return this._value\r\n}\r\n\r\nfunction set(value) {\r\n  // if frozen -> don't set\r\n  if(this._isFrozen) return this\r\n\r\n  // if no/undefined input -> don't set\r\n  if(typeof value === 'undefined') return this\r\n  this._value = value\r\n\r\n  // notify\r\n  //  if not quiet -> notify\r\n  //  that is: if quiet -> don't notify\r\n  if(!this._isQuiet) this.notify()\r\n\r\n  return this\r\n}\r\n\r\nfunction update(...suppliedInputs) {\r\n  let newValue, inputs, inputLength\r\n\r\n  // if frozen -> don't update\r\n  if(this._isFrozen) return this\r\n\r\n  // if inputs are supplied ->\r\n  //    temporarily overwrite defined inputs with any supplied inputs\r\n  // else just use defined inputs\r\n  if(suppliedInputs.length > 0) {\r\n    inputLength = Math.max(this._inputs.length, suppliedInputs.length)\r\n    inputs = [...Array(inputLength)].map((_, index) => {\r\n      return typeof suppliedInputs[index] !== 'undefined' ?\r\n        suppliedInputs[index] :\r\n        this._inputs[index]\r\n    })\r\n  } else {\r\n    inputs = this._inputs\r\n  }\r\n\r\n  // calculate new value by applying inputs to reducer\r\n  newValue = this._reducer(...inputs.map(input=>input.valueOf()))\n\r\n  // if new value is undefined -> don't update, don't notify\r\n  //  note: new value is undefined when reducer returned an undefined value\r\n  if(typeof newValue === 'undefined') return this\r\n  this._value = newValue\r\n\r\n  // notify\r\n  //  if not quiet -> notify\r\n  //  that is: if quiet -> don't notify\r\n  if(!this._isQuiet) this.notify()\r\n\r\n  return this\r\n}\r\n\r\nfunction notify() {\r\n  if(this._isNotifying) throw new Error('circular dependency!')\n  this._isNotifying = true\r\n  this._listeners.forEach(listener => {\r\n    listener.trigger._value = this\r\n    listener.update()\n  })\n  this._isNotifying = false\r\n  return this\r\n}\r\n\r\nfunction reducer(reducerFn) {\r\n  if(arguments.length > 1) throw new Error('expected single argument')\r\n  if(typeof reducerFn !== 'function') throw new TypeError('expected a function')\r\n  this._reducer = reducerFn\r\n  return this\r\n}\r\n\r\nfunction input(...inputs) {\r\n  this._inputs = inputs\r\n  return this\r\n}\r\n\r\nfunction listenTo(...liveValues) {\r\n  liveValues.forEach((liveValue) => {\r\n    if(!liveValue.hasOwnProperty('_listeners') || !Array.isArray(liveValue._listeners)) {\r\n      throw new TypeError('Expected a live value')\r\n    }\r\n    liveValue._listeners.push(this)\r\n    return liveValue\r\n  })\r\n  return this\r\n}\r\n\r\nfunction listenToInput(...inputs) {\r\n  this.input(...inputs)\r\n  this.listenTo(...inputs)\r\n  return this\r\n}\r\n\r\nfunction freeze() {\r\n  this._isFrozen = true\r\n  return this\r\n}\r\n\r\nfunction unfreeze() {\r\n  this._isFrozen = false\r\n  return this\r\n}\r\n\r\nfunction quiet() {\r\n  this._isQuiet = true\r\n  return this\r\n}\r\n\r\nfunction unquiet() {\r\n  this._isQuiet = false\r\n  return this\r\n}\r\n\r\nconst prototype = {\r\n  valueOf,\r\n  set,\r\n  update,\n  notify,\r\n  reducer,\r\n  input,\r\n  inputs: input,\r\n  listenTo,\r\n  listenToInput,\r\n  listenToInputs: listenToInput,\r\n  freeze,\r\n  unfreeze,\r\n  quiet,\r\n  unquiet\r\n}\r\n\r\nfunction itsAlive(initialValue = null) {\r\n  return Object.assign(Object.create(prototype), {\r\n    _value: initialValue,\r\n    _reducer: function (x) { return x },\r\n    _inputs: [],\r\n    _listeners: [],\r\n    _isFrozen: false,\r\n    _isQuiet: false,\r\n    _isNotifying: false,\r\n    trigger: {\n      _value: null,\r\n      valueOf() { return this._value.valueOf() }\r\n    }\n  })\r\n}\r\n\r\nexport default itsAlive\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}